
//amr 
select tedv.value, pi.uid enrollmentUID, psi.uid eventUID, psi.executiondate::date eventDate from trackedentitydatavalue tedv
INNER JOIN programstageinstance psi on psi.programstageinstanceid = tedv.programstageinstanceid
INNER JOIN programinstance pi on pi.programinstanceid = psi.programinstanceid
INNER JOIN program prg on prg.programid = pi.programid
INNER JOIN dataelement de on de.dataelementid = tedv.dataelementid
where prg.uid in ( 'BUfpwe2iUQb', 'dzizG8i1cmP' , 'rMiBliR4FGr' ) and tedv.programstageinstanceid in (  
select tedv1.programstageinstanceid from trackedentitydatavalue tedv1
where tedv1.dataelementid = 2549 and tedv1.value between '2019-06-01' and '2019-07-31'
) and de.uid = 'lIkk661BLpG';

//optionValue 
Select code, optionsetid, name from optionvalue; 

//tedv
select psi.uid,de.name as deName, tedv.value, de.optionsetid from trackedentitydatavalue tedv
INNER JOIN programstageinstance psi ON psi.programstageinstanceid = tedv.programstageinstanceid
INNER JOIN dataelement de ON de.dataelementid = tedv.dataelementid
INNER JOIN optionset ops ON ops.optionsetid = de.optionsetid
where de.uid in ( 'SaQe2REkGVw', 'mp5MeJ2dFQz') and psi.uid in ( 'YZzKLq03NLP', 'qYIwF6EFpB9') order by psi.uid;


// SQL-Vew for AMR ISOLATE APP

EFanvAXeCoj =  AMR_ISOLATE_APP_AMRID

select tedv.value AS amrID, pi.uid AS enrollmentUID, psi.uid AS eventUID, psi.executiondate::date AS eventDate, prg.uid AS programUid, tei.uid AS teiUID, org.uid AS orgUID 
from trackedentitydatavalue tedv
INNER JOIN programstageinstance psi on psi.programstageinstanceid = tedv.programstageinstanceid
INNER JOIN programinstance pi on pi.programinstanceid = psi.programinstanceid
INNER JOIN program prg on prg.programid = pi.programid
INNER JOIN trackedentityinstance tei on tei.trackedentityinstanceid = pi.trackedentityinstanceid
INNER JOIN organisationunit org on org.organisationunitid = psi.organisationunitid
INNER JOIN dataelement de on de.dataelementid = tedv.dataelementid
where de.uid = 'lIkk661BLpG' and org.uid = '${orgUid}' and prg.uid = '${program}' and psi.executiondate between '${startdate}' and '${enddate}';

Qxf3P0JENJT = AMR_ISOLATE_APP_EDV

select psi.uid,de.name as deName, tedv.value, de.optionsetid from trackedentitydatavalue tedv
INNER JOIN programstageinstance psi ON psi.programstageinstanceid = tedv.programstageinstanceid
INNER JOIN dataelement de ON de.dataelementid = tedv.dataelementid
INNER JOIN optionset ops ON ops.optionsetid = de.optionsetid
where de.uid in ( 'SaQe2REkGVw', 'mp5MeJ2dFQz') and psi.uid =  '${eventID}' order by psi.uid;


p4HF5bVuL6x = AMR_ISOLATE_APP_OPTION_VALUE

Select code, optionsetid, name from optionvalue;


YqMvHMg8RKU = AMR_ISOLATE_APP_PROGRAMS

SELECT pg.uid pgUid, pg.name pgName,pg.programid,org.uid orgUid,org.name orgName,org.organisationunitid from program pg
INNER JOIN program_organisationunits pgOrg ON pgOrg.programid = pg.programid
INNER JOIN organisationunit org ON org.organisationunitid = pgOrg.organisationunitid
where org.uid = '${orgUid}'  order by pg.name;


// API Call

http://127.0.0.1:8090/dhis/api/organisationUnits/ANGhR1pa8I5.json?fields=id,displayName,code&includeDescendants=true&paging=false
